{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet LoginComponent = class LoginComponent {\n  constructor(authService, router, cookieService, authorizedService) {\n    this.authService = authService;\n    this.router = router;\n    this.cookieService = cookieService;\n    this.authorizedService = authorizedService;\n    this.btnText = \"Login\";\n    this.badCredential = false;\n    this.genericError = false;\n  }\n  ngOnInit() {\n    this.loginForm = new FormGroup({\n      username: new FormControl('', [Validators.required]),\n      password: new FormControl('', [Validators.required])\n    });\n  }\n  showPassword() {\n    this.inputType = !this.inputType;\n  }\n  get username() {\n    return this.loginForm.get('username');\n  }\n  get password() {\n    return this.loginForm.get('password');\n  }\n  submit() {\n    if (this.loginForm.invalid) {\n      return;\n    }\n    this.loginService.login(this.loginForm.get('username')?.value, this.loginForm.get('password')?.value).subscribe(res => {\n      this.token = res;\n      console.log(this.token.token);\n      this.cookieService.delete('token');\n      this.cookieService.set('token', `Bearer ${this.token.token}`);\n    }, err => {\n      this.loginForm.reset();\n      if (err.error.status === 500) {\n        this.badCredential = true;\n      } else {\n        this.genericError = true;\n        setTimeout(() => {\n          this.genericError = false;\n        }, 4000);\n      }\n    }, () => {\n      this.router.navigate(['user/me']);\n    });\n  }\n};\n__decorate([Input()], LoginComponent.prototype, \"btnText\", void 0);\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})], LoginComponent);\nexport { LoginComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AAOlC,IAAMC,cAAc,GAApB,MAAMA,cAAc;EASzBC,YAAoBC,WAAsB,EAAUC,MAAc,EAAUC,aAA4B,EAAUC,iBAAoC;IAAlI,gBAAW,GAAXH,WAAW;IAAqB,WAAM,GAANC,MAAM;IAAkB,kBAAa,GAAbC,aAAa;IAAyB,sBAAiB,GAAjBC,iBAAiB;IAR1H,YAAO,GAAG,OAAO;IAG1B,kBAAa,GAAG,KAAK;IACrB,iBAAY,GAAG,KAAK;EAIuI;EAE3JC,QAAQ;IACN,IAAI,CAACC,SAAS,GAAG,IAAIC,SAAS,CAAC;MAC7BC,QAAQ,EAAE,IAAIC,WAAW,CAAC,EAAE,EAAE,CAACC,UAAU,CAACC,QAAQ,CAAC,CAAC;MACpDC,QAAQ,EAAE,IAAIH,WAAW,CAAC,EAAE,EAAE,CAACC,UAAU,CAACC,QAAQ,CAAC;KACpD,CAAC;EAKJ;EAEAE,YAAY;IACV,IAAI,CAACC,SAAS,GAAG,CAAC,IAAI,CAACA,SAAS;EAClC;EAEA,IAAIN,QAAQ;IACV,OAAO,IAAI,CAACF,SAAS,CAACS,GAAG,CAAC,UAAU,CAAE;EACxC;EACA,IAAIH,QAAQ;IACV,OAAO,IAAI,CAACN,SAAS,CAACS,GAAG,CAAC,UAAU,CAAE;EACxC;EACAC,MAAM;IACJ,IAAI,IAAI,CAACV,SAAS,CAACW,OAAO,EAAE;MAC1B;;IAEF,IAAI,CAACC,YAAY,CAACC,KAAK,CAAC,IAAI,CAACb,SAAS,CAACS,GAAG,CAAC,UAAU,CAAC,EAAEK,KAAK,EAAE,IAAI,CAACd,SAAS,CAACS,GAAG,CAAC,UAAU,CAAC,EAAEK,KAAK,CAAC,CAClGC,SAAS,CAAEC,GAAG,IAAI;MACjB,IAAI,CAACC,KAAK,GAAGD,GAAG;MAChBE,OAAO,CAACC,GAAG,CAAC,IAAI,CAACF,KAAK,CAACA,KAAK,CAAC;MAC7B,IAAI,CAACpB,aAAa,CAACuB,MAAM,CAAC,OAAO,CAAC;MAClC,IAAI,CAACvB,aAAa,CAACwB,GAAG,CAAC,OAAO,EAAC,UAAU,IAAI,CAACJ,KAAK,CAACA,KAAK,EAAE,CAAC;IAC9D,CAAC,EAAGK,GAAG,IAAI;MACT,IAAI,CAACtB,SAAS,CAACuB,KAAK,EAAE;MACtB,IAAID,GAAG,CAACE,KAAK,CAACC,MAAM,KAAK,GAAG,EAAE;QAC5B,IAAI,CAACC,aAAa,GAAG,IAAI;OAC1B,MAAI;QACH,IAAI,CAACC,YAAY,GAAG,IAAI;QACxBC,UAAU,CAAC,MAAK;UACd,IAAI,CAACD,YAAY,GAAG,KAAK;QAE3B,CAAC,EAAC,IAAI,CAAC;;IAIX,CAAC,EAAE,MAAK;MACN,IAAI,CAAC/B,MAAM,CAACiC,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC;IACnC,CAAC,CAAC;EAGN;CAED;AA7DUC,YAARC,KAAK,EAAE,+CAAmB;AADhBtC,cAAc,eAL1BD,SAAS,CAAC;EACTwC,QAAQ,EAAE,WAAW;EACrBC,WAAW,EAAE,wBAAwB;EACrCC,SAAS,EAAE,CAAC,uBAAuB;CACpC,CAAC,GACWzC,cAAc,CA8D1B;SA9DYA,cAAc","names":["Component","LoginComponent","constructor","authService","router","cookieService","authorizedService","ngOnInit","loginForm","FormGroup","username","FormControl","Validators","required","password","showPassword","inputType","get","submit","invalid","loginService","login","value","subscribe","res","token","console","log","delete","set","err","reset","error","status","badCredential","genericError","setTimeout","navigate","__decorate","Input","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/home/sam/Desktop/auth-front-end/src/app/components/login/login.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent {\n  @Input() btnText = \"Login\";\n\n  loginForm!: FormGroup;\n  badCredential = false;\n  genericError = false;\n  token: TokenModel;\n  inputType: boolean\n\n  constructor(private authService: AuService, private router: Router, private cookieService: CookieService, private authorizedService: AuthorizedService ) { }\n\n  ngOnInit(): void {\n    this.loginForm = new FormGroup({\n      username: new FormControl('', [Validators.required]),\n      password: new FormControl('', [Validators.required])\n    });\n\n\n   \n   \n  }\n\n  showPassword(){\n    this.inputType = !this.inputType\n  }\n\n  get username() {\n    return this.loginForm.get('username')!;\n  }\n  get password() {\n    return this.loginForm.get('password')!;\n  }\n  submit() {\n    if (this.loginForm.invalid) {\n      return;\n    }\n    this.loginService.login(this.loginForm.get('username')?.value, this.loginForm.get('password')?.value)\n      .subscribe((res) => {\n        this.token = res;\n        console.log(this.token.token);\n        this.cookieService.delete('token');\n        this.cookieService.set('token',`Bearer ${this.token.token}`);\n      }, (err) => {\n        this.loginForm.reset()\n        if (err.error.status === 500) {\n          this.badCredential = true;\n        }else{\n          this.genericError = true;\n          setTimeout(() => {\n            this.genericError = false;\n            \n          },4000);\n          \n        }\n\n      }, () => {\n        this.router.navigate(['user/me']);\n      })\n\n\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}